{"version":3,"sources":["C:/Users/ypu/git/sw/src async","C:/Users/ypu/git/sw/src/app/app.component.css","C:/Users/ypu/git/sw/src/app/app.component.html","C:/Users/ypu/git/sw/src/app/app.component.ts","C:/Users/ypu/git/sw/src/app/app.module.ts","C:/Users/ypu/git/sw/src/app/fcm.service.ts","C:/Users/ypu/git/sw/src/environments/environment.ts","C:/Users/ypu/git/sw/src/main.ts"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"../../../../../src async recursive\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Users/ypu/git/sw/src async\n// module id = ../../../../../src async recursive\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Users/ypu/git/sw/src/app/app.component.css\n// module id = ../../../../../src/app/app.component.css\n// module chunks = 1","module.exports = \"<!--The content below is only a placeholder and can be replaced.-->\\n<p>Hello world</p>\\n\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Users/ypu/git/sw/src/app/app.component.html\n// module id = ../../../../../src/app/app.component.html\n// module chunks = 1","import { Component } from '@angular/core';\nimport { FCMService } from './fcm.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'app';\n\n  constructor(private fcmService: FCMService) {\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/ypu/git/sw/src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\nimport { AngularFireModule } from 'angularfire2';\nimport { environment } from '../environments/environment';\nimport { FCMService } from './fcm.service';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    AngularFireModule.initializeApp(environment.firebase)\n  ],\n  providers: [FCMService],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {\n  \n }\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/ypu/git/sw/src/app/app.module.ts","import { Inject, Injectable } from \"@angular/core\";\r\nimport { FirebaseApp } from \"angularfire2\";\r\nimport * as firebase from 'firebase';\r\n\r\n@Injectable()\r\nexport class FCMService {\r\n\r\n    private _messaging: firebase.messaging.Messaging;\r\n    private sentToServer: boolean; \r\n\r\n    constructor(@Inject(FirebaseApp) private _firebaseApp: firebase.app.App) {\r\n\r\n        this._messaging = firebase.messaging(this._firebaseApp);\r\n        this._messaging.requestPermission()\r\n            .then((result) => {\r\n\r\n                if (result == 'granted'){\r\n                    navigator.serviceWorker.ready.then((registration) => {\r\n                     registration.showNotification('Notification with servicework');\r\n                    })\r\n                  }\r\n             })\r\n            .catch((error) => { \r\n                console.log('Error: ', error);\r\n             });\r\n\r\n        this._messaging.getToken()\r\n             .then((currentToken) => {\r\n               if (currentToken) {\r\n                  this.sendTokenToServer(currentToken);\r\n                 this.updateUIForPushEnabled(currentToken);\r\n               } else {\r\n                 // Show permission request.\r\n                 console.log('No Instance ID token available. Request permission to generate one.');\r\n                 // Show permission UI.\r\n                 this.updateUIForPushPermissionRequired();\r\n                 this.setTokenSentToServer(false);\r\n               }\r\n             })\r\n             .catch((err) => {\r\n               console.log('An error occurred while retrieving token. ', err);\r\n               this.setTokenSentToServer(false);\r\n             });\r\n\r\n        this._messaging.onTokenRefresh(() => {\r\n              this._messaging.getToken()\r\n              .then(function(refreshedToken) {\r\n                window.prompt('Token refreshed.', refreshedToken);\r\n                // Indicate that the new Instance ID token has not yet been sent to the\r\n                // app server.\r\n                this.setTokenSentToServer(false);\r\n                // Send Instance ID token to app server.\r\n                this.sendTokenToServer(refreshedToken);\r\n                // ...\r\n              })\r\n              .catch(function(err) {\r\n                console.log('Unable to retrieve refreshed token ', err);\r\n              });\r\n\r\n            })\r\n\r\n\r\n        this._messaging.onMessage((payload) => {\r\n          console.log(\"Message received. \", payload);\r\n        })\r\n    }\r\n\r\n    private isTokenSentToServer() {\r\n      return this.sentToServer;\r\n    }\r\n    private setTokenSentToServer(sent) {\r\n      this.sentToServer = sent;\r\n    }\r\n\r\n    private updateUIForPushPermissionRequired () {\r\n      console.log('Push permission required...');\r\n    }\r\n\r\n    private updateUIForPushEnabled (currentToken){\r\n      window.prompt('Push enabled with token: ', currentToken);\r\n    }\r\n    private sendTokenToServer (currentToken): void {\r\n      if (!this.isTokenSentToServer()) {\r\n        console.log('Sending token to server...');\r\n        // TODO(developer): Send the current token to your server.\r\n        this.setTokenSentToServer(true);\r\n      } else {\r\n        console.log('Token already sent to server so won\\'t send it again ' +\r\n            'unless it changes');\r\n      }\r\n    }\r\n\r\n\r\n    private showToken (currentToken):void {\r\n      // Show token in console and UI.\r\n      var tokenElement = document.querySelector('#token');\r\n      tokenElement.textContent = currentToken;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// C:/Users/ypu/git/sw/src/app/fcm.service.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false,\n  firebase: {\n    apiKey: \"AIzaSyDNzAyWj4hqvwDjjKsNxeQO25nyJpczFxM\",\n    authDomain: \"myproject-b53cc.firebaseapp.com\",\n    databaseURL: \"https://myproject-b53cc.firebaseio.com\",\n    projectId: \"myproject-b53cc\",\n    storageBucket: \"\",\n    messagingSenderId: \"85893849466\"\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/ypu/git/sw/src/environments/environment.ts","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/ypu/git/sw/src/main.ts"],"sourceRoot":"webpack:///"}
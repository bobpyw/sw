{"version":3,"sources":["C:/Users/Yiwei/git/sw/src async","C:/Users/Yiwei/git/sw/src/app/app.component.css","C:/Users/Yiwei/git/sw/src/app/app.component.html","C:/Users/Yiwei/git/sw/src/app/app.component.ts","C:/Users/Yiwei/git/sw/src/app/app.module.ts","C:/Users/Yiwei/git/sw/src/app/fcm.service.ts","C:/Users/Yiwei/git/sw/src/environments/environment.ts","C:/Users/Yiwei/git/sw/src/main.ts"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = \"../../../../../src async recursive\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Users/Yiwei/git/sw/src async\n// module id = ../../../../../src async recursive\n// module chunks = 1","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Users/Yiwei/git/sw/src/app/app.component.css\n// module id = ../../../../../src/app/app.component.css\n// module chunks = 1","module.exports = \"<!--The content below is only a placeholder and can be replaced.-->\\r\\n<p>Hello world</p>\\r\\n\\r\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Users/Yiwei/git/sw/src/app/app.component.html\n// module id = ../../../../../src/app/app.component.html\n// module chunks = 1","import { Component } from '@angular/core';\r\nimport { FCMService } from './fcm.service';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n  title = 'app';\r\n\r\n  constructor(private fcmService: FCMService) {\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/Yiwei/git/sw/src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { AngularFireModule } from 'angularfire2';\r\nimport { environment } from '../environments/environment';\r\nimport { FCMService } from './fcm.service';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    AngularFireModule.initializeApp(environment.firebase)\r\n  ],\r\n  providers: [FCMService],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule {\r\n  \r\n }\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/Yiwei/git/sw/src/app/app.module.ts","import { Inject, Injectable } from \"@angular/core\";\r\nimport { FirebaseApp } from \"angularfire2\";\r\nimport * as firebase from 'firebase';\r\n\r\n@Injectable()\r\nexport class FCMService {\r\n\r\n    private _messaging: firebase.messaging.Messaging;\r\n    private sentToServer: boolean; \r\n\r\n    constructor(@Inject(FirebaseApp) private _firebaseApp: firebase.app.App) {\r\n\r\n\r\n        navigator.serviceWorker.register('./sw.js')\r\n          .then(registration => {\r\n\r\n            this._messaging = firebase.messaging(this._firebaseApp);\r\n            this._messaging.useServiceWorker(registration);\r\n\r\n            this._messaging.requestPermission()\r\n                .then((result) => {\r\n    \r\n                    if (result == 'granted'){\r\n                        navigator.serviceWorker.ready.then((registration) => {\r\n                         registration.showNotification('Notification with servicework');\r\n                        })\r\n                      }\r\n                 })\r\n                .catch((error) => { \r\n                    console.log('Error: ', error);\r\n                 });\r\n    \r\n            this._messaging.getToken()\r\n                 .then((currentToken) => {\r\n                   if (currentToken) {\r\n                      this.sendTokenToServer(currentToken);\r\n                     this.updateUIForPushEnabled(currentToken);\r\n                   } else {\r\n                     // Show permission request.\r\n                     console.log('No Instance ID token available. Request permission to generate one.');\r\n                     // Show permission UI.\r\n                     this.updateUIForPushPermissionRequired();\r\n                     this.setTokenSentToServer(false);\r\n                   }\r\n                 })\r\n                 .catch((err) => {\r\n                   console.log('An error occurred while retrieving token. ', err);\r\n                   this.setTokenSentToServer(false);\r\n                 });\r\n    \r\n            this._messaging.onTokenRefresh(() => {\r\n                  this._messaging.getToken()\r\n                  .then(function(refreshedToken) {\r\n                    window.prompt('Token refreshed.', refreshedToken);\r\n                    // Indicate that the new Instance ID token has not yet been sent to the\r\n                    // app server.\r\n                    this.setTokenSentToServer(false);\r\n                    // Send Instance ID token to app server.\r\n                    this.sendTokenToServer(refreshedToken);\r\n                    // ...\r\n                  })\r\n                  .catch(function(err) {\r\n                    console.log('Unable to retrieve refreshed token ', err);\r\n                  });\r\n    \r\n                })\r\n    \r\n    \r\n            this._messaging.onMessage((payload) => {\r\n              console.log(\"Message received. \", payload);\r\n            })\r\n\r\n          })\r\n\r\n          .catch(err => console.log('Boo!', err));\r\n        \r\n\r\n        \r\n    }\r\n\r\n    private isTokenSentToServer() {\r\n      return this.sentToServer;\r\n    }\r\n    private setTokenSentToServer(sent) {\r\n      this.sentToServer = sent;\r\n    }\r\n\r\n    private updateUIForPushPermissionRequired () {\r\n      console.log('Push permission required...');\r\n    }\r\n\r\n    private updateUIForPushEnabled (currentToken){\r\n      window.prompt('Push enabled with token: ', currentToken);\r\n    }\r\n    private sendTokenToServer (currentToken): void {\r\n      if (!this.isTokenSentToServer()) {\r\n        console.log('Sending token to server...');\r\n        // TODO(developer): Send the current token to your server.\r\n        this.setTokenSentToServer(true);\r\n      } else {\r\n        console.log('Token already sent to server so won\\'t send it again ' +\r\n            'unless it changes');\r\n      }\r\n    }\r\n\r\n\r\n    private showToken (currentToken):void {\r\n      // Show token in console and UI.\r\n      var tokenElement = document.querySelector('#token');\r\n      tokenElement.textContent = currentToken;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// C:/Users/Yiwei/git/sw/src/app/fcm.service.ts","// The file contents for the current environment will overwrite these during build.\r\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\r\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\r\n// The list of which env maps to which file can be found in `.angular-cli.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  firebase: {\r\n    apiKey: \"AIzaSyDNzAyWj4hqvwDjjKsNxeQO25nyJpczFxM\",\r\n    authDomain: \"myproject-b53cc.firebaseapp.com\",\r\n    databaseURL: \"https://myproject-b53cc.firebaseio.com\",\r\n    projectId: \"myproject-b53cc\",\r\n    storageBucket: \"\",\r\n    messagingSenderId: \"85893849466\"\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/Yiwei/git/sw/src/environments/environment.ts","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule);\r\n\n\n\n// WEBPACK FOOTER //\n// C:/Users/Yiwei/git/sw/src/main.ts"],"sourceRoot":"webpack:///"}